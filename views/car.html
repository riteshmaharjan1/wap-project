<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://www.cars.com/signin/" type="image/jpeg" rel="shortcut icon" />
  <title>Car</title>
  <link href="https://www.cars.com/signin/" type="image/jpeg" rel="shortcut icon" />
  <link rel="stylesheet" href="/stylesheets/style.css" />
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"/> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script> -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script>
    $.ajax("/allCars", {
      type: "GET",
    })
      .done((cars) => {
        if (Array.isArray(cars)) {
          var mainContent = $("#tBody");
          let table = $("<table>");

          if (cars.length > 0) {
            $("#noData").css("display", "none");
          } else {
            $("#noData").css("display", "block");
          }

          for (const car of cars) {
            let tr = $("<tr scope='col'>");

            for (const key in car) {
              if (key == "_id") {
                continue;
              }
              let td = $("<td scope='row'>");
              td.html(car[key]);
              tr.append(td);
            }
            let actionTD = $("<td class='txtCenter'>");
            actionTD.html("<a href='/edit'><img src='../public/images/edit.png' alt='edit' class='icon'></a><a href='' class='btn-default btn-rounded mb-4' data-toggle='modal' data-target='#modalLoginForm'><img src='../public/images/delete.jpeg' alt='delete' class='icon'></a>");
            tr.append(actionTD)
            mainContent.append(tr);
          }
        }
      })
      .fail(() => {
        console.log("Failed gracefully.");
      });

    function sortCars(cars) {
      //do sorting based on different categories
      return cars.sort((x, y) => {
        return x.price - y.price;
      });
    }

  </script>
</head>

<body>
  <div class="global-header">
    <div class="container">
      <div class="row">

        <div class="col-lg-12">
          <header class="header-menu">
            <a class="header-logo" href="/">
              <img alt="Cars.com" class="header-logo header-logo__img"
                src="https://www.cars.com/images/logo_cars-46214ae902ff93ba8fa2e40fb73dfa02.png?vsn=d" />
            </a>

            <nav class="navbar navbar-expand-sm navbar-light">
              <div class="container-fluid">
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div id="navbarCollapse" class="collapse navbar-collapse">
                  <ul class="nav navbar-nav header-links-wrapper">
                    <li class="header-link">
                      <a href="/shopping/">Cars for Sale</a>
                    </li>

                    <li class="header-link">
                      <a href="/research/">Research &amp; Reviews</a>
                    </li>

                    <li class="header-link">
                      <a href="/news/">News &amp; Videos</a>
                    </li>

                    <li class="header-link">
                      <a href="/sell/">Sell Your Car</a>
                    </li>

                    <li class="header-link">
                      <a href="/auto-repair/">Service &amp; Repair</a>
                    </li>
                  </ul>
                  <div class="sign-in-up-out mobile">
                    <a class="header-signin" content="Sign in" href="/signin/?redirect_path=%2F">Sign in</a>
                    <span role="presentation" class="sign-in-out-divider">/</span>
                    <a class="header-signup" content="Sign up" href="/signup/?redirect_path=%2F">Sign up</a>
                  </div>
                </div>

                <div id="google-one-tap">
                  <div id="g_id_onload"
                    data-client_id="67273791563-90cd8jqav0pgefmmb4l5732bguvbjapi.apps.googleusercontent.com"
                    data-login_uri="/signin/google_callback/"
                    data-redirect_path="/signin/?redirect_event%5Bsocial_platform%5D=google"
                    data-moment_callback="trackGoogleOneTap"></div>
                </div>
              </div>
            </nav>
          </header>
        </div>
        <!-- <h1>CAR PAGE</h1> -->
        <div class="col-lg-6">
          <div class="row">
            <div class="col-lg-1">
              <label for="filter" class="tDisplay p7"><b>Filter</b></label>
            </div>
            <div class="col-lg-5">
              <select class="form-select tDisplay">
                <option value="new-use">New/Used</option>
                <option value="make">Make</option>
                <option value="model">Model</option>
              </select>
            </div>
            <div class="col-lg-5">
              <select class="form-select tDisplay">
                <option value="1">1</option>
                <option value="1">1</option>
                <option value="1">1</option>
                <option value="1">1</option>
                <option value="1">1</option>
              </select>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="row">
            <div class="col-lg-1 txtRight">
              <label for="sort" class="tDisplay p7"><b>Sort</b></label>
            </div>
            <div class="col-lg-5">
              <select class="form-select tDisplay">
                <option value="1">1</option>
                <option value="1">1</option>
                <option value="1">1</option>
                <option value="1">1</option>
                <option value="1">1</option>
              </select>
            </div>
          </div>
        </div>

        <div class="col-lgg-12 tDisplay txtRight">
          <a href="/add">
            <button type="submit" class="btn save"> <b>Add</b> </button>
          </a>
        </div>

        <div class="col-lg-12">
          <div id="noData">No Contents to show.</div>
          <table class="table table-striped tDisplay">
            <thead>
              <tr>
                <!-- <th scope="col">#</th> -->
                <th scope="col">Condition</th>
                <th scope="col">Make</th>
                <th scope="col">Price</th>
                <th scope="col">Distance</th>
                <th scope="col">Zip</th>
                <th scope="col">Model</th>
                <th scope="col">View</th>
                <th scope="col" class="txtCenter">Action</th>
              </tr>
            </thead>
            <tbody id="tBody">
            </tbody>
          </table>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
          aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">Sign in</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body mx-3">
                <div class="md-form mb-5">
                  <i class="fas fa-envelope prefix grey-text"></i>
                  <input type="email" id="defaultForm-email" class="form-control validate">
                  <label data-error="wrong" data-success="right" for="defaultForm-email">Your email</label>
                </div>

                <div class="md-form mb-4">
                  <i class="fas fa-lock prefix grey-text"></i>
                  <input type="password" id="defaultForm-pass" class="form-control validate">
                  <label data-error="wrong" data-success="right" for="defaultForm-pass">Your password</label>
                </div>

              </div>
              <div class="modal-footer d-flex justify-content-center">
                <button class="btn btn-default">Login</button>
              </div>
            </div>
          </div>
        </div>
        <!-- end model  -->

      </div>
    </div>
  </div>
</body>

</html>